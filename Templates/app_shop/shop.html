{% extends "layout.html" %}
{% load static %}
{% load app_shop_f %}
{% block content %}
<section class="pt-5 pb-2 text-center container">
    <div class="row py-lg-5">
        <div class="col-lg-6 col-md-8 mx-auto">
            <h1 class="fw-light text-warning">Our products</h1>
            <p class="lead text-muted">Something short and leading about the collection below—its contents, the creator,
                etc. Make it short and sweet, but not too short so folks don’t simply skip over it entirely.</p>
            <p>
                <a href="{% url 'contact' %}" class="btn btn-outline-warning my-2">Contact us</a>
            </p>
        </div>
    </div>
</section>

<div class="album py-5 bg-transparent">
    <div class="container">
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
            {% for prod in products %}
            <div class="col">
                <div class="card shadow-sm">
                    <img src="{{prod.imagen.url}}" alt="" width="100%" height="50%">
                    <div class=" card-body">
                        <p class="card-text">Producto: {{prod.producto}}<br>Stock disponible: {{prod.stock_disponible}}
                        </p>
                        <hr>
                        <div class="d-flex justify-content-between align-items-center">
                            <form action="/shop/" method="post">{% csrf_token %}
                                <input hidden type="text" name="product" value="{{prod.id}}">
                                <input type="submit" class="btn btn-xs btn-outline-dark" value="Add">
                                {% if request.session.order %}
                                <div class="qty-signal">
                                    {{prod|in_order:request.session.order}}
                                </div>
                                {% endif %}

                            </form>
                            <small class="text-muted">$ {{prod.precio_menor}}</small>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}